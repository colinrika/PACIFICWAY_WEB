import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{api}from'../lib/api';import{useAuth}from'../context/AuthContext';export default function ItemNew(){const[name,setName]=useState('');const[description,setDescription]=useState('');const[price,setPrice]=useState('');const[stock,setStock]=useState('0');const[error,setError]=useState('');const{token,user}=useAuth();const nav=useNavigate();const submit=async e=>{e.preventDefault();try{setError('');const numericPrice=Number(price||0);const numericStock=Number(stock||0);await api('/items',{method:'POST',token,body:{name,description,price:numericPrice,stock:numericStock,quantity:numericStock,stock_quantity:numericStock}});nav('/items')}catch(err){setError(err.message)}};return(<div><h2>New Item</h2><div className='badge'>Signed in as: {user?.name} ({user?.role})</div>{error&&<div className='alert'>{error}</div>}<form onSubmit={submit}><input placeholder='Name' value={name} onChange={e=>setName(e.target.value)}/><textarea placeholder='Description' value={description} onChange={e=>setDescription(e.target.value)}/><input placeholder='Price' type='number' step='0.01' value={price} onChange={e=>setPrice(e.target.value)}/><input placeholder='Stock' type='number' value={stock} onChange={e=>setStock(e.target.value)}/><button>Create</button></form></div>)}
