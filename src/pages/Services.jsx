import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{api}from'../lib/api';import{useAuth}from'../context/AuthContext';export default function Services(){const[rows,setRows]=useState([]);const[error,setError]=useState('');const{user}=useAuth();useEffect(()=>{api('/services').then(d=>setRows(d.services||[])).catch(e=>setError(e.message))},[]);return(<div><div style={{display:'flex',alignItems:'center',gap:8}}><h2 style={{flex:1}}>Services</h2>{user&&<Link to='/services/new' className='badge'>+ New service</Link>}</div>{error&&<div className='alert'>{error}</div>}<table className='table'><thead><tr><th>Name</th><th>Category</th><th>Price</th><th>Provider</th></tr></thead><tbody>{rows.map(r=>(<tr key={r.id}><td>{r.name}</td><td>{r.category||'-'}</td><td>${Number(r.price).toFixed(2)}</td><td>{r.provider_name||r.provider_id?.slice(0,8)}</td></tr>))}</tbody></table>{!rows.length&&<div className='muted'>No services yet.</div>}</div>)}
